@model List<CheckBoxListDemo.Models.FacilityVM>

@{
    ViewBag.Title = "Create";
    int selectedRoomTypeId = ViewBag.SelectedRoomTypeId;
}

<h2>Create</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>



@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>RoomTypeFacilityVM</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <table>
            <tr>
                <td>Room Type: </td>
                <td>@Html.DropDownList("RoomTypes", null, htmlAttributes: new { @class = "form-control" })</td>
            </tr>


            @*@{
                for (var i = 0; i < Model.Count(); i++)
                {

                    <tr>
                        <td>
                            @Html.HiddenFor(it => it[i].Id)
                            @Html.DisplayFor(it => it[i].FacilityName)
                        </td>
                        <td>
                            @Html.CheckBoxFor(it => it[i].IsChecked, new { Style = "vertical-align:3px}" })
                        </td>
                    </tr>
                }
            }*@

                @{ Html.RenderAction("_LoadFacility", new { roomTypeId = selectedRoomTypeId }); }
                <div id="partial">

                </div>

            <tr>
                <td></td>
                <td>
                    <input type="submit" value="Create" class="btn btn-default" />
                </td>
            </tr>

        </table>
    </div>

                }

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        $(function () {

            $('#RoomTypes').change(function () {
                //alert("Selected index changed...");

                var selectedRoomTypeId = $('#RoomTypes').val();
                
                //var desigId = $('#DesigSearch').val();
                $('.chkList').hide();
            
                var url = "@Html.Raw(Url.Action("_LoadFacility", "RoomTypeFacility", new { roomTypeId = "-parameter"}))";
                url = url.replace("-parameter", selectedRoomTypeId);
                //url = url.replace("sempar", deptId);
                $('#partial').load(url);


            });

        });

    </script>

}
